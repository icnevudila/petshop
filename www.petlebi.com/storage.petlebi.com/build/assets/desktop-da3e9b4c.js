import{L as C,a as q,c as N,b as U,h as G}from"./cookie-5a7ec369.js";import{S as b,a as k,P as g,f as w,r as T,n as I,i as D,c as _,d as J,b as F}from"./lazy-recommendation-slider-b195ba83.js";const O={containerSelector:"#main-menu",megaMenuSelector:".mega-menu",overlaySelector:".mega-menu-overlay",toggleMegaMenuOverlay(){let e=this,t=document.querySelector(e.containerSelector),n=document.querySelector(e.overlaySelector),r=t.querySelectorAll(e.megaMenuSelector);for(let a=0;a<r.length;a++)r[a].parentElement.addEventListener("mouseenter",function(o){n.classList.add("open")}),r[a].parentElement.addEventListener("mouseleave",function(){n.classList.remove("open")})},menuStateVisibility(){let e=this,t=document.querySelector(e.containerSelector);t.addEventListener("mouseenter",function(n){t.classList.add("hovered")}),t.addEventListener("mouseleave",function(n){t.classList.remove("hovered")})},mainMenuItemHover(){let e=this,t=document.querySelector(e.containerSelector).querySelectorAll("li.main-menu-item a.main-menu-item-link");for(let n=0;n<t.length;n++)t[n].addEventListener("mouseenter",function(r){if(t[n].parentElement.querySelector(".mega-menu ul.mega-menu-sub-menu")){let a=t[n].parentElement.querySelector(".mega-menu ul.mega-menu-sub-menu li");a.classList.add("hovered"),setTimeout(function(){t[n].parentElement.querySelector(".mega-menu ul.mega-menu-sub-menu li.hovered")||a.classList.add("hovered")},300)}})},subMenuItemHover(){let e=this,t=document.querySelector(e.containerSelector).querySelectorAll("li.mega-menu-item"),n=[],r=[];for(let o=0;o<t.length;o++)t[o].addEventListener("mouseenter",function(i){clearTimeout(r[o]),n[o]=setTimeout(function(){a(t),t[o].classList.add("hovered")},150)}),t[o].addEventListener("mouseleave",function(i){clearTimeout(n[o]),r[o]=setTimeout(function(){t[o].classList.remove("hovered")},300)});function a(o){for(let i=0;i<o.length;i++)o[i].classList.remove("hovered")}},enableMenuHovers(){let e=this;document.querySelector(e.containerSelector).classList.add("init")},init(){let e=this;e.toggleMegaMenuOverlay(),e.mainMenuItemHover(),e.subMenuItemHover(),e.enableMenuHovers(),e.menuStateVisibility()}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(O.containerSelector)!==null&&O.init()});const R={containerSelector:".desktop-home",campaignSliderComponentSelector:".mobile-home-campaigns-sliders-component",campaignSliderSelector:".mobile-home-campaigns-slider",popularBrandsSliderSelector:".popular-brands-slider",popularProductsComponentSelector:".mobile-home-popular-products-component",popularProductsSliderSelector:".mobile-home-popular-products-slider",campaignSliders(){let e=this,t=document.querySelectorAll(e.campaignSliderSelector);for(let r=0;r<t.length;r++)t[r].classList.contains("init")||new b(t[r],{loop:!0,pagination:{el:".swiper-pagination",type:"fraction",renderFraction:function(a,o){return`<span class="${a}"></span>/<span class="${o}"></span>`}},on:{init:function(){t[r].classList.add("init")},slideChange(a){if(a.originalParams.loop){let o=a.slides[a.slides.length-1];if(o){let i=o.querySelector("img");i&&!i.classList.contains("loaded")&&typeof window.LazyLoad=="function"&&window.LazyLoad.load(i,{elements_selector:".lazy",data_src:"original"})}}}}});const n=document.querySelectorAll(`${e.campaignSliderComponentSelector} button[data-bs-toggle="tab"]`);for(let r=0;r<n.length;r++)n[r].addEventListener("show.bs.tab",a=>{n[r].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"});let o=a.target.getAttribute("data-bs-target");if(!o)return;let i=document.querySelector(`${e.campaignSliderComponentSelector} ${o}`);if(!i)return;let l=i.querySelector(".swiper");l&&l.swiper&&l.swiper.slideTo(0)})},popularBrandsSlider(){let e=this,t=document.querySelector(e.popularBrandsSliderSelector);t&&new b(t.querySelector(".swiper"),{loop:!1,freeMode:!0,slidesPerView:3.5,spaceBetween:16,on:{init:function(){t.classList.add("init")}}})},popularProductsSlider(){let e=this,t=document.querySelectorAll(e.popularProductsSliderSelector);if(!t)return;for(let r=0;r<t.length;r++)new b(t[r],{loop:!1,freeMode:!0,slidesPerView:1.5,spaceBetween:16,on:{init:function(){t[r].classList.add("init")}}});const n=document.querySelectorAll(`${e.popularProductsComponentSelector} button[data-bs-toggle="tab"]`);for(let r=0;r<n.length;r++)n[r].addEventListener("show.bs.tab",a=>{n[r].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"});let o=a.target.getAttribute("data-bs-target");if(!o)return;let i=document.querySelector(`${e.popularProductsComponentSelector} ${o}`);if(!i)return;let l=i.querySelector(".swiper");l&&l.swiper&&l.swiper.slideTo(0)})},popularProductsPromotionsSlider(){let e=this,t=document.querySelectorAll(`${e.popularProductsComponentSelector} .promotions-slider`);for(let n=0;n<t.length;n++)if(!t[n].classList.contains("init")){let r=t[n].querySelectorAll(".swiper-slide").length;new b(t[n],{slidesPerView:r>4?3.5:4,spaceBetween:5,on:{init:function(){t[n].classList.add("init")}}})}},adoptionsSlider(){let e=this,t=document.querySelector(`${e.containerSelector} .desktop-home-adopts-slider`);t&&new b(t.querySelector(".swiper"),{loop:!1,freeMode:!0,slidesPerView:5.5,spaceBetween:8,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},on:{init:function(){t.classList.add("init")}}})},blogSlider(){let e=this,t=document.querySelector(`${e.containerSelector} .desktop-home-blog-slider`);t&&new b(t.querySelector(".swiper"),{loop:!1,freeMode:!0,slidesPerView:4,spaceBetween:12,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},on:{init:function(){t.classList.add("init")}}})},qaSlider(){let e=this,t=document.querySelector(`${e.containerSelector} .desktop-home-qa-slider`);t&&new b(t.querySelector(".swiper"),{loop:!1,freeMode:!0,slidesPerView:4,spaceBetween:12,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},on:{init:function(){t.classList.add("init")}}})},init(){let e=this;e.campaignSliders(),e.popularBrandsSlider(),e.popularProductsSlider(),e.popularProductsPromotionsSlider(),e.adoptionsSlider(),e.blogSlider(),e.qaSlider()}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(R.containerSelector)!==null&&R.init()});const H={containerSelector:".desktop-basket",donationForm:"div.mobile-basket-donation-form",donationTrigger:"button[data-donation-trigger]",promoCodeForm:"div#desktop-basket-promo-code-box",promoCodeInput:"input[name=promocode]",promoCodeTrigger:"button[data-promocode-trigger]",promoCodeRemover:"button[data-promocode-remove]",rewardPointsApplyTrigger:"input[name=useRewardPoints]",rewardPointsRemoveTrigger:"button[data-rewardpoint-remove]",removeProductFromBasketTrigger:"button[data-basket-remove]",clearBasketTrigger:"button[data-basket-clear]",quantityChanger:"[data-basket-qty]",quantityInput:"[data-basket-qty-input]",quantityInc:"[data-basket-qty-inc]",quantityDec:"[data-basket-qty-dec]",quantityOutOfStockAvailable:"data-basket-qty-oos",formTriggerButton:"[data-trigger-form]",core:{toggleLoadingOverlay(e=!1){let t=document.querySelector("div.loading-overlay");e?t.classList.add("opened"):t.classList.remove("opened"),document.body.style.overflow=e?"hidden":""},checkProductStockAvailability(e,t){let n=`${window.PETLEBI.routes.basketCheckProductStock}?p=${e}&q=${t}`;return axios.get(n)},addProductToBasket(e,t){let n=`${window.PETLEBI.routes.basket}?p=${e}&q=${t}`;return axios.get(n)},removeProductFromBasket(e,t){return window.location.href=window.PETLEBI.routes.basketDelete.replace(":cartId",e)},clearBasket(){return axios.delete(window.PETLEBI.routes.basketClear).then(function(){return window.location.href=window.PETLEBI.routes.basket})},updateProductQuantity(e,t){return axios.post(window.PETLEBI.routes.basketUpdate,{item:e,qty:t,_token:window.PETLEBI.csrf})},addPromoCode(e){return axios.post(window.PETLEBI.routes.basketPromo,{promo:e,_token:window.PETLEBI.csrf})},removePromoCode(e){return window.location.href=window.PETLEBI.routes.basketDelete.replace(":cartId",e)},changeRewardPointUsage(e){let t=e?"apply":"remove",n=window.PETLEBI.routes.basketRewardPoints.replace("apply",t);return window.location.href=n}},init(){let e=this;e.donation(),e.applyPromoCode(),e.removePromoCode(),e.rewardPoints(),e.removeFromBasket(),e.clearBasket(),e.changeProductQuantity(),e.dynamicFormTrigger(),e.overlayBasketSummaryButtonTrigger(),e.deleteAddressConfirmModals()},donation(){let e=this,t=document.querySelector(e.donationForm);if(t===null)return!1;let n=document.querySelector(e.donationTrigger);if(n===null)return!1;n.addEventListener("click",function(r){r.preventDefault();let a=n.parentNode.querySelector("select"),i=`<p><strong>${a.options[a.selectedIndex].text}</strong> değerinde mama bağışını sepetinize eklemek istediğinize emin misiniz?</p>`;k("Mama Bağışı Yap",i,"Evet, Ekle","İptal",function(l){let s=t.getAttribute("data-donate-product-id");if(!s)return!1;let m=n.parentNode.querySelector("select").value||1;return e.core.toggleLoadingOverlay(!0),e.core.addProductToBasket(s,m).then(d=>{l.hide(),window.location.reload()}).catch(d=>{console.log(d)}),!1})})},applyPromoCode(){let e=this,t=document.querySelector(e.promoCodeForm);if(!t)return!1;let n=t.querySelector(e.promoCodeInput),r=t.querySelector(e.promoCodeTrigger),a=t.querySelector("span.invalid-feedback");t.addEventListener("shown.bs.collapse",function(){n.focus()}),t.addEventListener("hidden.bs.collapse",function(){n.classList.remove("is-invalid"),a.classList.remove("d-inline")}),n.addEventListener("input",function(){if(!n.value.trim())return a.classList.add("d-inline"),n.classList.add("is-invalid"),!1;n.classList.remove("is-invalid"),a.classList.remove("d-inline")}),r.addEventListener("click",function(o){o.preventDefault();let i=n.value.trim();return i?(n.classList.remove("is-invalid"),a.classList.remove("d-inline"),r.disabled=!0,e.core.toggleLoadingOverlay(!0),e.core.addPromoCode(i).then(function({data:l}){l.error?(g("Hata",`<p class="mb-0">${l.error}</p>`,"Tamam"),r.disabled=!1):location.reload()}).catch(l=>console.log(l)).finally(()=>{e.core.toggleLoadingOverlay()}),!1):(a.classList.add("d-inline"),n.classList.add("is-invalid"),!1)})},removePromoCode(){let e=this,t=document.querySelector(e.promoCodeRemover);if(!t)return!1;t.addEventListener("click",function(n){n.preventDefault();let r=t.getAttribute("data-promo-id");return r&&k("Uyarı","İndirim kuponunu sepetinizden çıkarmak istediğinizden emin misiniz?","Evet, Çıkar","İptal",function(){return e.core.removePromoCode(r)}),!1})},rewardPoints(){let e=this,t=document.querySelector(e.rewardPointsApplyTrigger),n=document.querySelector(e.rewardPointsRemoveTrigger);t&&t.addEventListener("change",function(r){return r.preventDefault(),e.core.changeRewardPointUsage(r.currentTarget.checked),!1}),n&&n.addEventListener("click",function(r){return r.preventDefault(),k("Uyarı","Parapuan kullanmak istemediğinizden emin misiniz?","Evet, Eminim","İptal",function(){return e.core.changeRewardPointUsage(!1)}),!1})},removeFromBasket(){let e=this,t=document.querySelectorAll(e.removeProductFromBasketTrigger);for(let n=0;n<t.length;n++){let r=t[n];r.addEventListener("click",function(a){a.preventDefault();let o=r.getAttribute("data-cart-id"),i=r.getAttribute("data-product-id"),l=r.getAttribute("data-product-name");if(!o||!i||!l)return!1;let s=`<strong>${l}</strong> ürününü sepetinizden çıkarmak istediğinizden emin misiniz?`;return k("Uyarı",s,"Evet, Çıkar","İptal",function(){return e.core.removeProductFromBasket(o)}),!1})}},clearBasket(){let e=this,t=document.querySelector(e.clearBasketTrigger);if(!t)return!1;t.addEventListener("click",function(n){return n.preventDefault(),k("Uyarı","Sepetinizdeki tüm ürünleri silmek istediğinizden emin misiniz?","Evet, Sil","İptal",function(){return e.core.clearBasket()}),!1})},changeProductQuantity(){let e=this,t=document.querySelectorAll(e.quantityChanger);for(let n=0;n<t.length;n++){let r=t[n],a=r.getAttribute("data-cart-id"),o=r.getAttribute("data-product-id"),i=r.querySelector(e.quantityInput),l=r.querySelector(e.quantityInc),s=r.querySelector(e.quantityDec),m=r.hasAttribute(e.quantityOutOfStockAvailable),d=parseInt(r.getAttribute("data-product-max-cart-count")||0,10),c=r.getAttribute("data-product-stock-status");if(!a||!o)return!1;l.addEventListener("click",function(f){f.preventDefault();let u=parseInt(i.value.toString()||1,10)+1,p=parseInt(i.getAttribute("max")||1,10);return d>0&&d<u?(g("Adet Sınırı",`Bu üründen sepetinize <strong>en fazla ${d} adet</strong> ekleyebilirsiniz.`,"Kapat"),!1):p<u?(g("Adet Ekleme","Bu ürün için maksimum adet limitine ulaştınız, daha fazla ekleyemezseniz.","Kapat"),!1):(l.disabled=!0,e.core.toggleLoadingOverlay(!0),c!=="1.0"?e.core.updateProductQuantity(a,u).then(function(y){y.data.result==="error"?g("Adet Ekleme",y.data.msg,"Kapat"):location.reload()}).catch(function(y){console.log(y)}).finally(function(){l.disabled=!1,e.core.toggleLoadingOverlay()}):e.core.checkProductStockAvailability(o,u).then(function(y){let v=y.data.stock;v<u?m?k(`Stokta ${v} Adet Ürün Var`,`Sepetinize bu üründen <strong>${u} adet</strong> eklemek isterseniz, size ürünü <u>1-3 iş günü</u> içerisinde gönderebiliriz.<br><br>Aynı gün kargolayabilmemiz için sepetinize maksimum <strong>${v} adet</strong> ekleyebilirsiniz.<br><br>Üründen sepetinizde <strong>${u} adet</strong> olmasını onaylıyor musunuz?`,"Onaylıyorum","İptal",function(){e.core.updateProductQuantity(a,u).then(function(h){h.data.result==="error"?g("Adet Ekleme",h.data.msg,"Kapat"):location.reload()}).catch(function(h){console.log(h)}).finally(function(){l.disabled=!1,e.core.toggleLoadingOverlay()})},function(){l.disabled=!1,e.core.toggleLoadingOverlay()}):g("Adet Ekleme",`İstediğiniz adette ürün stokta mevcut değil!<br>En fazla <strong>${v}</strong> adet ürün sipariş verebilirsiniz.`,"Kapat",function(){l.disabled=!1,e.core.toggleLoadingOverlay()}):e.core.updateProductQuantity(a,u).then(function(h){h.data.result==="error"?g("Adet Ekleme",h.data.msg,"Kapat"):location.reload()}).catch(function(h){console.log(h)}).finally(function(){l.disabled=!1,e.core.toggleLoadingOverlay()})}).finally(function(){l.disabled=!1,e.core.toggleLoadingOverlay()}),!1)}),s.addEventListener("click",function(f){f.preventDefault();let u=parseInt(i.value.toString()||1,10)-1;return u<=0||(s.disabled=!0,e.core.toggleLoadingOverlay(!0),e.core.updateProductQuantity(a,u).then(function(p){location.reload()}).catch(function(p){console.log(p)}).finally(()=>{l.disabled=!1,e.core.toggleLoadingOverlay()})),!1})}},dynamicFormTrigger(){let e=this,t=document.querySelector(e.formTriggerButton);if(!t)return!1;let n=e.formTriggerButton.replace("[","").replace("]","");t.addEventListener("click",function(r){r.preventDefault();let a=r.currentTarget.getAttribute(n),o=document.getElementById(a);return o&&(t.disabled=!0,o.requestSubmit()),!1}),document.addEventListener("formValidationFailed",function(r){t.disabled=!1})},overlayBasketSummaryButtonTrigger(){let e=document.querySelector('.mobile-basket-bottom-fixed-container button.mobile-basket-summary-trigger[data-overlay-target="basket-summary"]'),t=document.querySelector(".mobile-basket-bottom-fixed-container button.mobile-basket-summary-trigger.ptlb-overlay-container-close");if(!e||!t)return!1;e.addEventListener("click",function(n){return n.preventDefault(),setTimeout(function(){e.classList.add("d-none"),t.classList.remove("d-none"),t.classList.add("d-block")},100),!1}),t.addEventListener("click",function(n){return n.preventDefault(),setTimeout(function(){t.classList.add("d-none"),e.classList.remove("d-none"),e.classList.add("d-block")},100),!1}),document.addEventListener("overlayContainerClosed",function(n){return n.preventDefault(),setTimeout(function(){t.classList.add("d-none"),e.classList.remove("d-none"),e.classList.add("d-block")},100),!1})},deleteAddressConfirmModals(){let e=document.querySelectorAll("form.overlay-content-payment-delivery-address-item-delete-form");for(let t=0;t<e.length;t++)e[t].addEventListener("submit",function(n){return n.preventDefault(),k("Uyarı","Adresi silmek istediğinizden emin misiniz?","Evet, Sil","İptal",function(){return e[t].submit(),!0},function(){return!1})})}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(H.containerSelector)!==null&&H.init()});const S={containerSelector:"div.desktop-basket-payment-container",formSelector:"div.desktop-basket-payment-container form",methodsContentSelector:"div.desktop-basket-payment-pay-methods-content",methodsTabSelector:"div.desktop-basket-payment-pay-methods-content ul.nav",methodsTabButtonSelector:'div.desktop-basket-payment-pay-methods-content ul.nav button[data-bs-toggle="tab"]',contractAgreementInput:"input[type=checkbox][name=contract]",cardSelectionRadioInput:"input[type=radio][name=cardToken]",installmentSelectionRadioInput:"input[type=radio][name=installmentCount]",addNewCreditCardContainer:"div.desktop-basket-payment-add-new-cc-container",installmentsContainer:"div.desktop-basket-cc-installments",installmentsDropdownButton:"button.installment-dropdown-button",rewardPointsContainer:"div.desktop-basket-reward-points-component",contractGrandTotalHolder:"span.contract_grandTotal",contractPaymentTypeHolder:"span.contract_paymentType",basketTotalPriceHolder:".basket-total-price",payAtDoorServiceFeeElementHolder:"div.basket-payment-pay-at-door-service-fee",submitTriggerButton:"button#desktop-checkout-form-submit",form:void 0,availablePaymentTypes:["credit_card","transfer","pay_atDoor"],availablePaymentTypeTitles:["Kredi Kartı","Havale / EFT","Kapıda Ödeme"],notesTextareaSelector:"div#desktop-basket-order-notes-box-content textarea#notes",notesCharsInfoSelector:"div#desktop-basket-order-notes-box-content small#notesInfo",deliverAddressSelectionForm:"form.overlay-content-payment-delivery-address-selection-form",core:{toggleLoadingOverlay(e=!1){let t=document.querySelector("div.loading-overlay");e?t.classList.add("opened"):t.classList.remove("opened"),document.body.style.overflow=e?"hidden":""},checkBin(e,t,n){let r=this,a=`${window.PETLEBI.routes.binCheck}?cc=${e}`;t&&(a=`${a}&s=${t}`),r.toggleLoadingOverlay(!0),window.axios.get(a).then(function(o){r.toggleLoadingOverlay(!1),typeof n=="function"&&n(o.data)}).catch(function(o){r.toggleLoadingOverlay(!1),console.log(o)})},resetValidationRules(){let t=S.form.querySelectorAll(".validate-me:not(.no-reset)");for(let n=0;n<t.length;n++)t[n].classList.remove("was-validated"),t[n].querySelector("input")&&t[n].querySelector("input").removeAttribute("required"),t[n].querySelector("select")&&t[n].querySelector("select").removeAttribute("required")},handleSubmit(){let e=S,t=document.querySelector(e.submitTriggerButton),n="moka",r=e.form.querySelector("input[name=pay_type]").value,a=e.form.querySelector("input[type=radio][name=cardToken]:checked"),o=a.value||"new",i=e.form.querySelector("#cc_number"),l=e.form.querySelector("#cc_owner"),s=e.form.querySelector("#cc_month"),m=e.form.querySelector("#cc_year"),d=e.form.querySelector("#cc_cvc");switch(e.core.resetValidationRules(),r){case"credit_card":if(o==="new"){i.setAttribute("required",!0),l.setAttribute("required",!0),s.setAttribute("required",!0),m.setAttribute("required",!0),d.setAttribute("required",!0);let y=i.value.trim().replace(/\s/g,""),v=l.value.trim().replace(/\s+/g," "),h=parseInt(s.value.trim()),L=parseInt(m.value.trim()),P=d.value.trim().replace(/\s/g,""),$=new Date,K=$.getMonth()+1,z=$.getFullYear();if(!e.form.checkValidity()){let E=e.form.querySelectorAll(".validate-me");for(let A=0;A<E.length;A++)E[A].classList.add("was-validated");return E[0].focus(),E[0].scrollIntoView(),window.scroll({top:E[0].getBoundingClientRect().top-60+window.scrollY,behavior:"smooth"}),!1}if(!v||v.length<3)return g("Hata","Kredi kartı üzerindeki ad soyad alanı gereklidir.");if(!y||y.length<13||y.length>16)return g("Hata","Eksik ya da hatalı kredi kartı numarası girdiniz. Lütfen kontrol ediniz.");if(!L||L<z||!h||L===z&&h<K)return g("Hata","Eksik ya da hatalı kredi kartı geçerlilik tarihi girdiniz. Lütfen kontrol ediniz.");if(!P||P.length<3||P.length>5)return g("Hata","Eksik ya da hatalı kredi kartı CVC2 numarası girdiniz. Lütfen kontrol ediniz.");e.form.querySelector("#cc_number").value=y,e.form.querySelector("#cc_owner").value=v,n="payten"}else parseInt(a.getAttribute("data-source"))===2&&(n="payten");let u={note:e.form.querySelector("textarea[name=notes]").value,oid:e.form.querySelector("input[type=hidden][name=order]").value,cid:a.getAttribute("data-id")||"",bin:e.form.querySelector("#cc_number").value.substring(0,8)||"",installment:parseInt(e.form.querySelector(`${e.installmentSelectionRadioInput}:checked`).value),rate:parseFloat(e.form.querySelector(`${e.installmentSelectionRadioInput}:checked`).getAttribute("data-rate"))};c(function(){e.core.toggleLoadingOverlay(!0),window.axios.post(`${window.PETLEBI.routes.base}/cart/save`,u).then(function(y){if(y.data.status==="success")n==="payten"&&e.form.setAttribute("action",e.form.getAttribute("action")+y.data.token),f();else return e.core.toggleLoadingOverlay(!1),g("Hata",y.data.msg,void 0,function(){window.location.reload()})}).catch(function(y){return e.core.toggleLoadingOverlay(!1),console.log(y),g("Hata","Beklenmedik sorun oluştu!",void 0,function(){window.location.reload()})})});break;case"transfer":let p=e.form.querySelector("select#bank");if(!p.value)return p.focus(),g("Hata","Lütfen Havale/EFT işlemi için banka seçiniz");c(function(){f()});break;case"pay_atDoor":c(function(){f()});break;default:throw new Error(`payment type ${r} not found!`)}function c(u){let p=document.querySelector(e.contractAgreementInput);if(p.checked)p.classList.remove("is-invalid"),typeof u=="function"&&u();else return p.classList.add("is-invalid"),p.focus(),g("Hata",`Lütfen "Ön Bilgilendirme Formu'nu ve Mesafeli Satış Sözleşmesi'ni okudum ve kabul ediyorum." metnini onaylayın.`),!1}function f(){t.disabled=!0,e.core.toggleLoadingOverlay(!0),document.querySelector("input[name=cardToken][value=new]").remove(),e.form.submit()}},setTextAllElements(e,t){if(!t||t.length===0)return!1;for(let n=0;n<t.length;n++)t[n].innerText=e}},events:{paymentTypeChanged(e,t=!0){let n=S,r=document.querySelector(n.rewardPointsContainer),a=parseFloat(n.form.getAttribute("data-price-total")),o=parseFloat(n.form.getAttribute("data-limit-pay-at-door")),i=document.querySelectorAll(n.contractGrandTotalHolder),l=document.querySelectorAll(n.contractPaymentTypeHolder),s=document.querySelectorAll(n.basketTotalPriceHolder),m=document.querySelector(n.payAtDoorServiceFeeElementHolder);m.classList.remove("d-flex"),m.classList.add("d-none"),r.classList.remove("d-none"),n.core.resetValidationRules();let d="",c="",f="",u=!1;switch(e){case S.availablePaymentTypes[0]:t?c=window.PETLEBI.routes.checkout3D:c=window.PETLEBI.routes.checkoutNon3D;let v,h=n.form.querySelector(`${n.cardSelectionRadioInput}:checked`),L=n.form.querySelector(n.cardSelectionRadioInput);h?v=h:L&&(v=L),v&&(v.checked=!0,v.dispatchEvent(new Event("change",{}))),n.core.setTextAllElements(n.availablePaymentTypeTitles[0],l),f=parseFloat(document.querySelector(`${n.installmentSelectionRadioInput}:checked`).getAttribute("data-total")),d="Kredi Kartı";break;case S.availablePaymentTypes[1]:c=window.PETLEBI.routes.checkoutBase,n.core.setTextAllElements(n.availablePaymentTypeTitles[1],l),f=parseFloat(n.form.getAttribute("data-price-total")),d="Havale / EFT";break;case S.availablePaymentTypes[2]:c=window.PETLEBI.routes.checkoutBase,a<o&&(u=!0),n.core.setTextAllElements(n.availablePaymentTypeTitles[2],l),m.classList.add("d-flex"),m.classList.remove("d-none"),f=parseFloat(n.form.getAttribute("data-price-pay-at-door")),r.classList.add("d-none"),d="Kapıda Ödeme";break;default:c=window.PETLEBI.routes.checkoutBase;break}let p=w(f);n.core.setTextAllElements(`${p} TL`,s),n.core.setTextAllElements(p,i),n.core.setTextAllElements(d,document.querySelectorAll("span.basket-payment-method")),n.form.querySelector("input[name=pay_type]").value=e,n.form.setAttribute("action",c);let y=document.querySelector(n.submitTriggerButton);y.disabled=u},creditCardChanged(e,t){let n=S;e==="new"?(n.toggleNewCreditCardForm(!0),n.events.installmentsChanged(),n.renderCampaignContent(void 0,".new-cc-campaign-content-holder",!0)):(n.toggleNewCreditCardForm(!1),n.core.checkBin(t.bin,t.source,function(r){r.installment==="yes"&&r.installmentList.length>0?n.events.installmentsChanged(r.installmentList):n.events.installmentsChanged(),n.renderCampaignContent(r.campaign,".exist-cc-campaign-content-holder",!0)}))},installmentsChanged(e=[]){let t=S,n=document.querySelector(t.installmentsContainer),r=n.querySelector("table"),a=document.querySelector("input[name=cardToken]:checked"),o=n.querySelector(t.installmentsDropdownButton);n.classList.add("d-none"),n.classList.remove("has-more-installments","shown-all-installments"),a&&a.parentElement.parentElement.append(n);let i=r.querySelectorAll("tr.dynamic-installment");for(let s=0;s<i.length;s++)i[s].remove();if(e!==void 0&&e.length>0){let s=document.createElement("template");s.innerHTML=l(e),e.length>2?(n.classList.add("has-more-installments"),o.addEventListener("click",function(m){return m.preventDefault(),n.classList.add("shown-all-installments"),!1})):n.classList.remove("has-more-installments"),r.querySelector("tbody").append(s.content),s.remove()}r.querySelector("tbody tr td input[type=radio][name=installmentCount][id=installment-1]").checked=!0,n.classList.remove("d-none"),t.installmentSelection();function l(s){let m=[];for(let d=0;d<s.length;d++){let c=s[d],f=`<tr class="dynamic-installment ${c.count>3?"optional-visible-installment":""}"><td class="ps-0"><div class="form-check"><input class="form-check-input" type="radio" name="installmentCount" value="${c.count}" id="installment-${c.count}" data-rate="${c.interest}" data-total="${c.total_amount.replace(".","").replace(",",".")}"></div></td><td class="ps-0"><label class="fw-normal" for="installment-${c.count}">${c.count} Taksit</label> x <strong>${c.installment_amount} TL</strong></td><th class="text-end">${c.total_amount} TL</th></tr>`;m.push(f)}return m.join("")}},selectedInstallmentChanged(e,t){let n=S,r=document.querySelectorAll(n.contractGrandTotalHolder),a=document.querySelectorAll(n.basketTotalPriceHolder),o=w(parseFloat(t.total));n.core.setTextAllElements(o,r),n.core.setTextAllElements(`${o} TL`,a);let i="Kredi Kartı / ";t.value===1?i+="Tek Çekim":i+=`${t.value} Taksit`,n.core.setTextAllElements(i,document.querySelectorAll("span.basket-payment-method"))}},init(){let e=this;e.form=document.querySelector(e.formSelector),e.paymentMethodSelection(),e.creditCardSelection(),e.newCreditCardForm(),e.contractAgreementSelection(),e.submitForm(),e.notesCounter(),e.deliveryAddressSelection()},paymentMethodSelection(){let e=this,t=document.querySelectorAll(e.methodsTabButtonSelector);for(let n=0;n<t.length;n++)t[n].addEventListener("shown.bs.tab",function(r){let a=r.target.getAttribute("id").replace("-tab","");if(!a||e.availablePaymentTypes.indexOf(a)===-1)throw new Error(`payment type: "${a}" not found!`);return e.events.paymentTypeChanged(a),!1})},creditCardSelection(){let e=this,t=e.form.querySelectorAll(e.cardSelectionRadioInput);for(let r=0;r<t.length;r++)t[r].addEventListener("change",function(a){a.preventDefault();let o=e.form.querySelector(`${e.cardSelectionRadioInput}:checked`);if(!o)throw new Error("selected card element not found!");let i=o.value;if(!o)throw new Error(`selected card token: "${i}" not found!`);let l;return i!=="new"&&(l={id:o.getAttribute("data-id"),source:o.getAttribute("data-source"),bin:o.getAttribute("data-bin"),hasInstallment:o.getAttribute("data-ins")}),e.events.creditCardChanged(i,l),!1});let n=e.form.querySelector(`${e.cardSelectionRadioInput}:checked`);n&&n.value!=="new"&&n.dispatchEvent(new Event("change",{}))},installmentSelection(){let e=this,t=e.form.querySelectorAll(e.installmentSelectionRadioInput);for(let a=0;a<t.length;a++){let o=t[a];o.hasAttribute("has-listener")||(o.addEventListener("change",n,!1),o.setAttribute("has-listener","yes"))}function n(a){a.preventDefault();let o=e.form.querySelector(`${e.installmentSelectionRadioInput}:checked`);if(!o)throw new Error("selected installment element not found!");let i=parseInt(o.value);if(!i)throw new Error(`selected installment value: "${i}" not found!`);let l={rate:o.getAttribute("data-rate"),total:o.getAttribute("data-total"),value:i};return e.events.selectedInstallmentChanged(i,l),!1}let r=e.form.querySelector(`${e.installmentSelectionRadioInput}:checked`);r&&r.dispatchEvent(new Event("change",{}))},contractAgreementSelection(){let e=this,t=document.querySelector(e.contractAgreementInput);t.addEventListener("change",function(n){return n.preventDefault(),t.classList.remove("is-invalid"),n.currentTarget.checked||t.classList.add("is-invalid"),!1})},toggleNewCreditCardForm(e=!1){let t=this,n=document.querySelector(t.addNewCreditCardContainer),r=n.querySelectorAll("input, select");for(let a=0;a<r.length;a++)r[a].type==="select-one"?r[a].value=r[a].querySelector("option").value:r[a].type==="checkbox"?r[a].checked=!1:r[a].value="";t.core.resetValidationRules(),e?n.classList.remove("d-none"):n.classList.add("d-none")},newCreditCardForm(){let e=this;document.querySelector("#cc_number").addEventListener("blur",function(t){let n=t.currentTarget.value.replace(/\s/g,"");n.length>=8?e.core.checkBin(n.substring(0,8),void 0,function(r){r.installment==="yes"&&r.installmentList.length>0&&e.events.installmentsChanged(r.installmentList),e.renderCampaignContent(r.campaign,".new-cc-campaign-content-holder",!1)}):(e.events.installmentsChanged(),e.renderCampaignContent(void 0,".new-cc-campaign-content-holder",!1))})},renderCampaignContent(e,t,n=!1){let r=document.querySelectorAll(".campaign-content-holder");for(let l=0;l<r.length;l++)r[l].innerHTML="";let a=document.querySelector(t),o="";!e||e.status!=="yes"?o="":e.campaignId==="patikart"?o=`<div class="card my-4" id="patikart-campaign-success">
                                        <div class="card-header py-2 px-4 fw-medium text-sm" style="color:#1570EF;background: #EFF8FF;">Maximum Pati Kart'a Özel %10 İndirim!</div>
                                        <div class="card-body text-sm py-2 px-4">
                                            <p class="mb-0">Siparişinize ekstra %10 indirim uygulandı. Bu sayede <span class="fw-bold text-price">${w(e.campaignDiscount)} TL</span> daha az ödeme yapıyorsunuz.</p>
                                        </div>
                                    </div>`:e.campaignId==="denizbank"&&(e.active==="yes"?o=`<div class="card my-4" id="denizbank-campaign-success">
                                            <div class="card-header py-2 px-4 fw-medium text-sm" style="color:#1570EF;background: #EFF8FF;">500 TL’ye 125 TL İndirim Fırsatı!</div>
                                            <div class="card-body text-sm py-2 px-4">Siparişinize <span class="fw-medium">denizbank150</span> kodu uygulandı. Bu sayede <span class="fw-bold text-price">125 TL</span> daha az ödeme yapıyorsunuz.</div>
                                        </div>`:o=`<div class="card my-4" id="denizbank-campaign-error">
                                            <div class="card-header py-2 px-4 text-sm" style="color:#CF1B21;background: #FFEFEF;">Siparişinize uyguladığınız <span class="fw-medium">denizbank150</span> indirim kodunu sadece DenizBank kredi kartını kullanarak yapacağınız alışverişlerde kullanabilirsiniz.</div>
                                            <div class="card-body text-sm py-2 px-4">Girdiğiniz kredi kartıyla ödeme işlemine devam edilemiyor. İndirim kodunu kaldırabilir veya DenizBank kredi kartı bilgilerinizi girebilirsiniz.</div>
                                        </div>`);let i=document.querySelector("input[type=radio][name=installmentCount][id=installment-1]");if(o){if(a.innerHTML=o,n){let l=document.querySelector("input[name=cardToken]:checked");l&&l.parentElement.parentElement.insertBefore(a,l.parentElement.parentElement.querySelector("label.desktop-basket-payment-credit-card-box").nextSibling)}i.parentElement.parentElement.parentElement.querySelector("td strong").textContent=`${w(e.campaignGrandTotal)} TL`,i.parentElement.parentElement.parentElement.querySelector("th").textContent=`${w(e.campaignGrandTotal)} TL`,i.setAttribute("data-total",e.campaignGrandTotal)}else{a.innerHTML="";let l=i.getAttribute("data-normal");i.parentElement.parentElement.parentElement.querySelector("td strong").textContent=`${w(l)} TL`,i.parentElement.parentElement.parentElement.querySelector("th").textContent=`${w(l)} TL`,i.setAttribute("data-total",l)}i.dispatchEvent(new Event("change",{}))},submitForm(){let e=this;document.querySelector(e.submitTriggerButton).addEventListener("click",function(t){return t.preventDefault(),e.core.handleSubmit(),!1},!1)},notesCounter(){let e=this,t=document.querySelector(e.notesTextareaSelector),n=document.querySelector(e.notesCharsInfoSelector);t.addEventListener("input",function(r){let a=t.getAttribute("maxlength"),o=t.value.length;o===0||o>=a?n.innerText="":n.innerText=a-o+" karakter kaldı."})},deliveryAddressSelection(){let e=this,t=document.querySelector(e.deliverAddressSelectionForm);if(!t)return!1;t.addEventListener("change",function(n){n.preventDefault();let r=t.querySelector("input[name=aid]:checked");if(!r)return!1;let a=r.getAttribute("data-title"),o=r.getAttribute("data-address");return k("Emin misiniz?",`<p>Teslimat adresinizi <strong>${a}</strong> olarak değiştirmek istediğinizden emin misiniz?</p><p class="text-gray mb-0"><strong>${a}</strong><br/>${o}</p>`,"Evet, Değiştir","İptal",function(){return t.submit()},function(){let i=t.querySelector("input[name=aid][data-selected]");i&&(i.checked=!0)})})}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(S.containerSelector)!==null&&document.querySelector(S.formSelector)!==null&&S.init()});const M={containerSelector:".desktop-products-listing",listsContainerSelector:"div.desktop-products-list-container",itemsListSelector:"ul.desktop-products-listing-items-list",paginationContainerSelector:".desktop-products-listing-pagination-container",pagination:{nextPageUrl:null,prevPageUrl:null,isLoading:!1,lastScroll:0,currentPage:1,fetchedPages:[],initialTop:0},cachePrefix:"",isElementMostlyVisible:function(e){let t=document.documentElement.scrollTop,n=window.innerHeight,r=e.getBoundingClientRect().top+document.documentElement.scrollTop,a=e.getBoundingClientRect().height;return r+a-a*.25>t&&r<t+.5*n},lazyLoadImages(e=void 0){typeof window.LazyLoad!==void 0&&new LazyLoad({elements_selector:".lazy",data_src:"original",use_native:!0})},getPageContent(e,t){let n=this;n.pagination.isLoading=!0,axios.get(e).then(function(r){r.data&&t&&typeof t=="function"&&t(r.data)}).catch(function(r){}).finally(function(){n.pagination.isLoading=!1})},setPaginationContent(e){let t=this;if(!e)return!1;let n=T(e);if(!n||n.length===0)return!1;document.querySelector(t.paginationContainerSelector).innerHTML="",document.querySelector(t.paginationContainerSelector).appendChild(n[0])},checkAlreadyLoaded(e){return this.pagination.fetchedPages.indexOf(e)>-1},determinePageDirection(){let e=this,t=document.documentElement.scrollTop,n=document.querySelector(e.listsContainerSelector);return t>=.9*(n.getBoundingClientRect().height-window.innerHeight)?1:t<=.9*(e.pagination.initialTop+500)?-1:0},changeHistoryURLByListFragment(){let e=this,t=document.documentElement.scrollTop,n=document.querySelectorAll(e.itemsListSelector);if(Math.abs(t-e.pagination.lastScroll)>window.innerHeight*.1){e.pagination.lastScroll=t;for(let r=0;r<n.length;r++)if(e.isElementMostlyVisible(n[r])){let a=n[r].getAttribute("data-url");a&&location.href!==a&&(history.pushState(null,null,a),e.createEventTrackingImpressions(n[r])),e.setPaginationContent(n[r].getAttribute("data-pagination"));break}}},loadNext(){let e=this;if(e.pagination.isLoading||!e.pagination.nextPageUrl||e.pagination.nextPageUrl==="")return!1;let t=new URL(e.pagination.nextPageUrl).searchParams.get("page");if(e.checkAlreadyLoaded(t))return!1;let n=document.querySelector(e.listsContainerSelector);e.getPageContent(e.pagination.nextPageUrl,function(r){let a=T(r.response)[0];n.append(a),e.lazyLoadImages(n),e.setPaginationContent(a.getAttribute("data-pagination")),e.createPromotionsSlider(a),e.outOfStockClickListener(a),e.pagination.nextPageUrl=r.next_data_url,e.pagination.currentPage=r.current_page,e.checkAlreadyLoaded(r.current_page)||e.pagination.fetchedPages.push(r.current_page),e.pagination.isLoading=!1})},loadPrev(){let e=this;if(e.pagination.isLoading||!e.pagination.prevPageUrl||e.pagination.prevPageUrl==="")return!1;let t=new URL(e.pagination.prevPageUrl).searchParams.get("page");if(!t||e.checkAlreadyLoaded(parseInt(t)))return!1;let n=document.querySelector(e.listsContainerSelector);e.getPageContent(e.pagination.prevPageUrl,function(r){let a=T(r.response)[0];n.prepend(a);let o=document.querySelector(".initial-list");o&&(o.scrollIntoView({behavior:"instant"}),o.classList.remove("initial-list")),e.lazyLoadImages(n),e.setPaginationContent(a.getAttribute("data-pagination")),e.createPromotionsSlider(a),e.outOfStockClickListener(a),e.pagination.prevPageUrl=r.prev_data_url,e.pagination.currentPage=r.current_page,e.checkAlreadyLoaded(r.current_page)||e.pagination.fetchedPages.push(r.current_page),e.pagination.isLoading=!1})},initPagination(){let e=this;window.hasOwnProperty("ListingPaginationData")&&(e.pagination.nextPageUrl=window.ListingPaginationData.nextPageUrl,e.pagination.prevPageUrl=window.ListingPaginationData.prevPageUrl,e.pagination.currentPage=window.ListingPaginationData.currentPage,e.pagination.fetchedPages=[window.ListingPaginationData.currentPage]),e.pagination.initialTop=1e3,window.addEventListener("scroll",function(t){switch(e.determinePageDirection()){case 1:e.loadNext();break;case-1:e.loadPrev();break}e.changeHistoryURLByListFragment()})},createEventTrackingImpressions(e){if(!e)return!1;let t=this,n=e.querySelectorAll("[data-gtm-product]"),r=e.getAttribute("data-list-name"),a=10,o=-1,i=[];window.dataLayer=window.dataLayer||[];for(let l=0;l<n.length;l++){let s=n[l],m=s.getAttribute("id"),d=s.getAttribute("data-gtm-product"),c=`${t.cachePrefix}${m}`;l%a===0&&(o++,i[o]=[]),i[o].push(d);let f=localStorage.getItem(c),u=null;f?u=JSON.parse(f):u=JSON.parse(d),u&&localStorage.setItem(c,JSON.stringify(u)),s.getAttribute("has-listener")||(s.addEventListener("click",function(p){return p.preventDefault(),d&&window.dataLayer!==void 0&&window.dataLayer.push({event:"ecProductClick",eventCategory:"Enhanced Ecommerce",eventAction:"Product Click",eventLabel:s.getAttribute("title"),ecommerce:{currencyCode:"TRY",click:{actionField:{list:r},products:[d]}},eventCallback:function(){document.location=s.getAttribute("href")}}),document.location=s.getAttribute("href"),!1}),s.setAttribute("has-listener",""))}if(i.length&&window.dataLayer!==void 0)for(let l=0;l<i.length;l++)window.dataLayer.push({event:"ecProductImpression",eventCategory:"Enhanced Ecommerce",eventAction:"Product Impression",ecommerce:{currencyCode:"TRY",impressions:i[l]}})},createPromotionsSlider(e){if(!e)return!1;let t=e.querySelectorAll("li .promotions-slider");for(let n=0;n<t.length;n++)if(!t[n].classList.contains("init")){let r=t[n].querySelectorAll(".swiper-slide").length,a=!1;r>4&&(a={nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}),new b(t[n],{slidesPerView:r>4?3.5:4,spaceBetween:5,navigation:a,on:{init:function(){t[n].classList.add("init")}}})}},outOfStockClickListener(e){if(!e)return!1;let t=e.querySelectorAll("li.out-of-stock");for(let n=0;n<t.length;n++)t[n].querySelector("div.listing-item-left").addEventListener("click",function(r){return r.preventDefault(),window.location.href=r.currentTarget.querySelector("a").getAttribute("href")})},filterActions(){let e=document.querySelector("form.desktop-listing-filters-term-form"),t=e.querySelector("input[name=k]"),n=e.querySelector("button[type=submit]");function r(a){if(t.value.trim()==="")return a.preventDefault(),!1}t.addEventListener("keydown",a=>{if(a.key==="Enter")return r(a)}),n.addEventListener("click",r)},init(){let e=this;e.initPagination(),e.createEventTrackingImpressions(document.querySelector(`${e.listsContainerSelector} ${e.itemsListSelector}`)),e.createPromotionsSlider(document.querySelector(`${e.listsContainerSelector} ${e.itemsListSelector}`)),e.outOfStockClickListener(document.querySelector(`${e.listsContainerSelector} ${e.itemsListSelector}`)),e.filterActions()}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(M.containerSelector)!==null&&M.init()});const B={container:"div.desktop-products-detail",sliderSelector:"div.desktop-products-detail-image-slider",thumbnailSliderSelector:"div.desktop-products-detail-thumbnail-slider",pricesSelector:"div.desktop-products-detail-prices-container",addToCartSelector:"div.desktop-products-detail-add-to-cart",fixedAddToCartSelector:"div.desktop-products-detail-fixed-add-to-cart",headerBasketItemsCountSelector:"ul.user-actions-menu li a.cart-link span em",reviewsSelector:"div.desktop-products-detail-item-reviews",core:{toggleLoadingOverlay(e=!1){let t=document.querySelector("div.loading-overlay");e?t.classList.add("opened"):t.classList.remove("opened"),document.body.style.overflow=e?"hidden":""},checkProductStockAvailability(e,t){let n=`${window.PETLEBI.routes.basketCheckProductStock}?p=${e}&q=${t}`;return axios.get(n)},addProductToBasket(e,t){let n=`${window.PETLEBI.routes.basket}?p=${e}&q=${t}`;return axios.get(n)},getBasketItemsCount(){let e=`${window.PETLEBI.routes.basketCount}`;return axios.get(e,{headers:{"Content-Type":"application/json"},data:{}})},updateBasketItemCountUI(e){let t=B;if(!document.querySelector(t.headerBasketItemsCountSelector))return!1;t.core.getBasketItemsCount().then(function(r){let a=r.data.count,o=document.querySelector(t.headerBasketItemsCountSelector);if(o.textContent=a,o.classList.add("has-items"),e){e=parseFloat(e);let i=document.querySelector("span[data-basket-price]"),l=parseFloat(i.getAttribute("data-basket-price")||0)+parseFloat(e);i.setAttribute("data-basket-price",l.toString()),i.innerHTML=`${w(l,2,2)} TL`}}).catch(function(r){console.log(r)})}},slider(){let e=this,t=document.querySelector(e.sliderSelector),n=document.querySelector(e.thumbnailSliderSelector);if(!t||!n)return!1;setTimeout(function(){new b(t,{lazy:!0,loop:!0,pagination:{el:".swiper-pagination",type:"fraction",renderFraction:function(r,a){return`<span class="${r}"></span>/<span class="${a}"></span>`}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){t.classList.add("init")}},thumbs:{swiper:new b(n.querySelector(".swiper"),{lazy:!0,loop:!1,spaceBetween:8,slidesPerView:9,freeMode:!0,centerInsufficientSlides:!0,watchSlidesProgress:!0,navigation:{nextEl:n.querySelector(".swiper-button-next"),prevEl:n.querySelector(".swiper-button-prev")},on:{init:function(){n.classList.add("init")}}})}})},100)},addToCart(){let e=this,t=document.querySelector(`${e.addToCartSelector} button.desktop-products-detail-add-to-cart-button`),n=document.querySelector(`${e.addToCartSelector} input[type=number][name=quantity]`);if(!t||!n)return!1;let r=parseInt(n.getAttribute("max")||1,10),a=JSON.parse(atob(t.getAttribute("data-product"))),o=a.id,i=t.hasAttribute("data-product-qty-oos"),l=parseInt(t.getAttribute("data-product-max-cart-count")||0,10),s=t.getAttribute("data-product-stock-status"),m=t.getAttribute("data-gtm");t.addEventListener("click",function(d){d.preventDefault();let c=parseInt(n.value.toString()||1,10);return l>0&&l<c?(g("Adet Sınırı",`Bu üründen sepetinize <strong>en fazla ${l} adet</strong> ekleyebilirsiniz.`,"Kapat"),!1):r<c?(g("Adet Sınırı","Bu ürün için maksimum adet limitine ulaştınız, daha fazla ekleyemezseniz.","Kapat"),!1):(t.disabled=!0,e.core.toggleLoadingOverlay(!0),s!=="1.0"?e.core.addProductToBasket(o,c).then(function(f){f.data.result==="error"?g("Adet Sınırı",f.data.msg,"Kapat"):(e.sendAddToCartEvent(m,c,o),e.core.toggleLoadingOverlay(),I(a),e.core.updateBasketItemCountUI(a.price),t.disabled=!1)}).catch(function(f){console.log(f)}).finally(function(){t.disabled=!1,e.core.toggleLoadingOverlay()}):e.core.checkProductStockAvailability(o,c).then(function(f){let u=f.data.stock;if(u<=f.data.cart)return g("Adet Sınırı",`Ürünü size aynı gün kargolayabilmemiz için sepetinize en fazla <strong>${u}</strong> adet ekleyebilirsiniz.`,"Kapat",function(){t.disabled=!1,e.core.toggleLoadingOverlay()}),!1;if(l>0&&l<=f.data.cart)return g("Adet Sınırı",`Bu üründen sepetinize <strong>en fazla ${l} adet</strong> ekleyebilirsiniz.`,"Kapat"),!1;u<c?i&&u>0?k(`Stokta ${u} Adet Ürün Var`,`Sepetinize bu üründen <strong>${c} adet</strong> eklemek isterseniz, size ürünü <u>1-3 iş günü</u> içerisinde gönderebiliriz.<br><br>Aynı gün kargolayabilmemiz için sepetinize maksimum <strong>${u} adet</strong> ekleyebilirsiniz.<br><br>Üründen sepetinizde <strong>${c} adet</strong> olmasını onaylıyor musunuz?`,"Onaylıyorum","İptal",function(){e.core.addProductToBasket(o,c).then(function(p){p.data.result==="error"?g("Adet Sınırı",p.data.msg,"Kapat"):(e.sendAddToCartEvent(m,c,o),e.core.toggleLoadingOverlay(),I(a),e.core.updateBasketItemCountUI(a.price),t.disabled=!1)}).catch(function(p){console.log(p)}).finally(function(){t.disabled=!1,e.core.toggleLoadingOverlay()})},function(){t.disabled=!1,e.core.toggleLoadingOverlay()}):g("Adet Sınırı",`İstediğiniz adette ürün stokta mevcut değil!<br>En fazla <strong>${u}</strong> adet ürün sipariş verebilirsiniz.`,"Kapat",function(){t.disabled=!1,e.core.toggleLoadingOverlay()}):e.core.addProductToBasket(o,c).then(function(p){p.data.result==="error"?g("Adet Sınırı",p.data.msg,"Kapat"):(e.sendAddToCartEvent(m,c,o),e.core.toggleLoadingOverlay(),I(a),e.core.updateBasketItemCountUI(a.price),t.disabled=!1)}).catch(function(p){console.log(p)}).finally(function(){t.disabled=!1,e.core.toggleLoadingOverlay()})}).finally(function(){t.disabled=!1,e.core.toggleLoadingOverlay()}),!1)})},scrollToCommentsFromURL(){let e=window.location.hash,t="#yorumlar",n=document.querySelector(".desktop-products-detail-comments"),r=document.querySelector("header.header");if(D(n))return!1;(e&&e===t||window.location.href.search(t)>-1)&&setTimeout(function(){n.scrollIntoView(),window.scrollTo({top:n.getBoundingClientRect().top-r.getBoundingClientRect().height+-10+window.scrollY,left:0,behavior:"smooth"})},1e3)},sendAddToCartEvent(e,t,n){if(!e||!n)return!1;let r,a=localStorage.getItem("product"+n);if(a?r=JSON.parse(a):(r=JSON.parse(e),r.list="Direct Product Detail",localStorage.setItem("product"+n,JSON.stringify(r))),!r)return!1;r.quantity=t,window.dataLayer=window.dataLayer||[],dataLayer.push({event:"ecProductAddToCart",eventCategory:"Enhanced Ecommerce",eventAction:"Add to Cart",eventLabel:r.name,ecommerce:{currencyCode:"TRY",add:{actionField:{list:r.list},products:[r]}}})},adaptAddToCartComponentInView(){let e=this,t=document.querySelector(e.fixedAddToCartSelector);if(!t)return!1;let n=document.querySelector(e.addToCartSelector);function r(){D(n)?(t.classList.remove("shown"),document.body.style.paddingBottom=""):(t.classList.add("shown"),document.body.style.paddingBottom=`${t.clientHeight}px`)}r(),document.addEventListener("scroll",r,!1);let a=n.querySelector(".quantity-changer"),o=n.querySelector("button.desktop-products-detail-add-to-cart-button"),i=n.querySelector("input[type=number][name=quantity]"),l=t.querySelector(".quantity-changer"),s=t.querySelector("button.desktop-products-detail-fixed-add-to-cart-button"),m=t.querySelector("input[type=number]");if(!s||!m)return!1;s.addEventListener("click",function(d){return d.preventDefault(),d.stopPropagation(),o.click()}),l.addEventListener("quantityChange",function(d){return i.value=d.detail.quantity,a.dispatchEvent(new CustomEvent("updateButtonStates",{detail:{quantity:d.detail.quantity}}))}),a.addEventListener("quantityChange",function(d){return m.value=d.detail.quantity,l.dispatchEvent(new CustomEvent("updateButtonStates",{detail:{quantity:d.detail.quantity}}))})},infiniteLoadComments(){let e=this,t=document.querySelector(".desktop-comments-list-container");if(!t)return!1;let n=t.querySelector("button.desktop-products-detail-load-more-comments-button");if(!n)return!1;n.addEventListener("click",r);function r(a){a.preventDefault(),a.stopPropagation();let o=a.currentTarget,i=o.getAttribute("data-url");if(!i)return!1;e.core.toggleLoadingOverlay(!0),axios.get(i).then(function(l){o.parentElement.remove(),t.insertAdjacentHTML("beforeend",l.data.html);let s=t.querySelector("button.desktop-products-detail-load-more-comments-button");s&&s.addEventListener("click",r)}).catch(function(l){console.log(l)}).finally(function(){e.core.toggleLoadingOverlay()})}},init(){let e=this;e.slider(),e.addToCart(),e.scrollToCommentsFromURL(),e.adaptAddToCartComponentInView(),e.infiniteLoadComments()}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(B.container)!==null&&B.init()});const V={containerSelector:".desktop-type-index",blogSlider(){let e=this,t=document.querySelector(`${e.containerSelector} .desktop-type-index-blog-slider`);t&&new b(t.querySelector(".swiper"),{loop:!1,freeMode:!0,slidesPerView:4,spaceBetween:12,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},on:{init:function(){t.classList.add("init")}}})},qaSlider(){let e=this,t=document.querySelector(`${e.containerSelector} .desktop-type-index-qa-slider`);t&&new b(t.querySelector(".swiper"),{loop:!1,freeMode:!0,slidesPerView:4,spaceBetween:12,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},on:{init:function(){t.classList.add("init")}}})},init(){let e=this;e.blogSlider(),e.qaSlider()}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(V.containerSelector)!==null&&V.init()});const x={headerSelector:"header.header",containerSelector:".desktop-search",searchForm:".desktop-search form",searchInput:"form input",submitButton:"form button.search-submit",clearButton:"form button.search-clear",previousSearchesContainer:".search-previous-items-list",clearPreviousSearchesButton:".search-previous-clear-btn",resultsContainer:".results-container",overlaySelector:".header-search-overlay",recommendation_blocks:{blank:[{code:"067eae39cc0ae398533ea94972ccfc02",params:{},block:"dynamic",type:"horizontal-6",titleClasses:"text-md fw-semibold mt-2 mb-n1",per_view:2.5,gap:8,navigation:!0},{code:"4ad1f3d70f6e866df2f654fa5c4ecb2e",params:{},block:"dynamic",type:"horizontal-6",titleClasses:"text-md fw-semibold mb-n1",per_view:2.5,gap:8,navigation:!0},{code:"011e21048cb76504b93bcfc9a69114c5",params:{},block:"dynamic",type:"horizontal-6",titleClasses:"text-md fw-semibold mt-2 mb-n1",per_view:2.5,gap:8,navigation:!0}],"not-found":[{code:"9745c8941320b3f20cad9db017f09aff",params:{},block:"dynamic",type:"horizontal-6",titleClasses:"text-md fw-semibold mt-2 mb-n1",per_view:2.5,gap:8,navigation:!0,hideAddToCart:!0}]},core:{getPreviousSearches(){let t=C("search:previous");return t!==null?t.reverse():[]},addPreviousSearch(e){let t="search:previous",n=C(t)||[],r=n.findIndex(function(a){return a.label===e.label});r!==-1&&n.splice(r,1),n.push({label:e.label,url:e.url}),q(t,n.slice(-10),60*60*24*7)},getBlankResults(){let e="search:blank";return new Promise(function(t,n){if(!window.personaclick)return n(!1);let r=C(e);if(r)return t(r);window.personaclick("search",{search_query:"",limit:1},function(a){return q(e,a,60),t(a)},function(a){return console.log(a),n(a)})})},getSuggestResults(e){let t=`search:suggest:${encodeURIComponent(e)}`;return new Promise(function(n,r){if(!window.personaclick)return r(!1);let a=C(t);if(a)return n(a);window.personaclick("suggest",{search_query:e},function(o){return q(t,o,30),n(o)},function(o){return console.log(o),r(o)})})},getSuggestInternalResults(e){let t=`search:suggest_internal:${encodeURIComponent(e)}`;return new Promise(function(n,r){let a=C(t);return a?n(a):axios.get(`${window.PETLEBI.routes.base}/search?q=${e}`).then(function(o){return q(t,o.data.data,30),n(o.data.data)}).catch(function(o){return console.log(o),r(o)})})},renderListItems(e=[],t=""){let n=[];for(let r=0;r<e.length;r++)n.push(`<li><a href="${e[r].url}">${e[r].name}</a></li>`);return n.length?`<div class='search-popular-items-list'><span>${t}</span><div><ul>${n.join("")}</ul></div></div>`:""},renderRecommendationBlocks(e=[]){let t="";for(let n=0;n<e.length;n++)t+=`<div class="ptlb-recommend" data-config="${btoa(JSON.stringify(e[n]))}"></div>`;return t},renderSearchResults(e="",t={},n={}){let r=[],a=encodeURIComponent(e);if(n.suggestions.length)for(let i=0;i<n.suggestions.length;i++){let l=n.suggestions[i],s=l.name.replace(new RegExp(e,"giu"),"<mark>$&</mark>");r.push(`<li class="result-term"><a href="${l.navigateUri}" data-name="${l.name}"><span>${s}</span><span class="result-type">${l.label??""}</span></a></li>`)}if(t.products.length)for(let i=0;i<t.products.length;i++){let l=t.products[i];r.push(`<li class="result-product">
                                <a href="${l.url}">
                                    <div class="search-card-image">
                                    <img src="${l.image_url}" alt="${l.name}">
                                    </div>
                                    <div class="search-card-content">
                                        <span>${l.name}</span>
                                        <div><strong>${w(l.price_full)} TL</strong></div>
                                    </div>
                                </a>
                            </li>`)}let o=`<a class="btn btn-sm btn-secondary w-100" href='${window.PETLEBI.routes.base}/alisveris/ara?k=${a}&amp;personaclick_search_query=${a}&amp;personaclick_input_query=${a}'>"${e}" ile ilgili tüm sonuçları göster</a>`;return r.length?`<div class='search-result-list'><span>Arama Sonuçları</span><div class="scrollable"><ul>${r.join("")}</ul></div></div><div class="p-4">${o}</div>`:""},renderPreviousSearches(){let e=this.getPreviousSearches();if(e.length===0)return"";let t=[];for(let n=0;n<e.length;n++){let r=e[n];t.push(`<li><button class="clear-previous-search-item-btn" type="button" data-index="${n}"><i class="far fa-xmark-large"></i></button><a href="${r.url}">${r.label}</a></li>`)}return`<div class='search-previous-items-list'><div class="d-flex justify-content-between align-items-end"><span>Geçmiş Aramalarım</span><button type="button" class="search-previous-clear-btn btn btn-link mb-2 p-0 border-0">Tümünü Temizle</button></div><div><ul>${t.join("")}</ul></div></div>`}},show(){let e=this,t=document.querySelector(e.containerSelector);if(t.classList.contains("active"))return;let n=document.querySelector(e.searchInput),r=document.querySelector(e.clearButton);n.value&&n.value.length>=2?(r.classList.add("shown"),e.showSuggestSearch(e),t.classList.add("active"),document.querySelector(e.overlaySelector).classList.add("open")):(r.classList.remove("shown"),e.showBlankSearch(function(){t.classList.add("active"),document.querySelector(e.overlaySelector).classList.add("open"),document.querySelector(e.headerSelector),document.body.classList.contains("fixed-header")||(document.querySelector(e.headerSelector).style.position="unset")}))},hide(){let e=this,t=document.querySelector(e.containerSelector),n=t.querySelector(e.resultsContainer),r=t.querySelector(e.searchInput),a=t.querySelector(e.clearButton);t.classList.remove("active"),a.classList.remove("shown"),document.querySelector(e.overlaySelector).classList.remove("open"),document.querySelector(e.headerSelector).style.position="",n.classList.remove("initial"),n.innerHTML="",r.blur()},showBlankSearch(e=null){let t=this,r=document.querySelector(t.containerSelector).querySelector(t.resultsContainer);r.classList.add("initial"),async function(){let a="",o=await t.core.getBlankResults();a+=t.core.renderPreviousSearches(),o.popular_categories&&(a+=t.core.renderListItems(o.popular_categories,"Popüler Kategoriler")),o.popular_brands&&(a+=t.core.renderListItems(o.popular_brands,"Popüler Markalar")),a+=t.core.renderRecommendationBlocks(x.recommendation_blocks.blank),r.innerHTML=`<div class="scrollable">${a}</div>`,t.clearPreviousSearches(),t.bindClearPreviousSearchItemButtons(),_(r,!1,function(){typeof e=="function"&&e()})}()},showSuggestSearch(e){let t=document.querySelector(e.searchInput),n=document.querySelector(e.resultsContainer);n.classList.remove("initial");let r=t.value.trim();if(!r)return!1;(async function(){let a=await e.core.getSuggestResults(r);if(a.products_total===0)return e.showNotFoundResult();let o=await e.core.getSuggestInternalResults(r);n.innerHTML=e.core.renderSearchResults(r,a,o);let i=n.querySelectorAll(".search-result-list ul li.result-term a");for(let l=0;l<i.length;l++)i[l].addEventListener("click",function(s){let m=s.currentTarget.getAttribute("href"),d=s.currentTarget.getAttribute("data-name");return d&&m&&e.core.addPreviousSearch({label:d,url:m}),!0})})()},showNotFoundResult(){let e=this,t=document.querySelector(e.searchInput),n=document.querySelector(e.resultsContainer);return async function(){let r="";r+=`<p class="m-4"><strong>"${t.value}"</strong> aramanıza uygun ürün bulamadık. 😔</p>`,r+=e.core.renderRecommendationBlocks(e.recommendation_blocks["not-found"]),n.innerHTML=r,_(n,!1)}(),!1},init(){let e=this,t=document.querySelector(e.searchForm),n=document.querySelector(e.searchInput),r=document.querySelector(e.submitButton),a=document.querySelector(e.clearButton);const o=J(e.showSuggestSearch,300);n.addEventListener("focus",function(){e.show()}),n.addEventListener("input",function(i){i.target.value&&i.target.value.length>=2?(a.classList.add("shown"),o(e)):(a.classList.remove("shown"),e.showBlankSearch())}),r.addEventListener("click",e.handleSearchSubmit.bind(e)),t.addEventListener("submit",e.handleSearchSubmit.bind(e)),a.addEventListener("click",i=>(n.value="",e.hide(),e.show(),n.focus(),!0)),e.hideByOverlayClick(),e.hideByScroll(),e.clearOldSearchesData()},handleSearchSubmit(e){let t=this,r=document.querySelector(t.searchInput).value.trim();if(!r||r.length<2)return e.preventDefault(),t.show(),!1;let a=encodeURIComponent(r);return t.core.addPreviousSearch({label:r,url:`${window.PETLEBI.routes.base}/alisveris/ara?k=${a}&amp;personaclick_search_query=${a}&amp;personaclick_input_query=${a}`}),!0},hideByOverlayClick(){let e=this;document.querySelector(e.overlaySelector).addEventListener("click",function(t){return t.preventDefault(),e.hide(),!1})},hideByScroll(){let e=this;if(document.body.classList.contains("fixed-header"))return!1;let t=document.querySelector(e.containerSelector),n=t.querySelector(e.resultsContainer);document.addEventListener("scroll",function(r){let a=document.documentElement.scrollTop||document.body.scrollTop,o=n.getBoundingClientRect().height+t.getBoundingClientRect().height;t.classList.contains("active")&&a>o&&e.hide()})},clearPreviousSearches(){let e=this,t=document.querySelector(e.previousSearchesContainer);if(t===null)return!1;let n=t.querySelector(e.clearPreviousSearchesButton);if(n===null)return!1;n.addEventListener("click",function(r){r.preventDefault(),q("search:previous",[],1),t.remove()})},bindClearPreviousSearchItemButtons(){let e=this,t=document.querySelector(e.previousSearchesContainer);if(t===null)return!1;let n=t.querySelectorAll("button.clear-previous-search-item-btn");for(let r=0;r<n.length;r++)n[r].addEventListener("click",function(a){a.preventDefault();let o=parseInt(this.getAttribute("data-index")),i=e.core.getPreviousSearches();return i.splice(o,1),q("search:previous",i.reverse(),60*60*24*7),e.showBlankSearch(),!1})},clearOldSearchesData(){let e=N("search:*");for(let t=0;t<e.length;t++){let n=e[t],r=JSON.parse(n.value);new Date().getTime()>r.expiry&&window.localStorage.removeItem(n.key)}}};document.addEventListener("DOMContentLoaded",function(){document.querySelector(x.containerSelector)!==null&&x.init()});(function(){let e=document.querySelectorAll('a[data-type="filter"]');for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(n){n.preventDefault();let r=n.currentTarget.getAttribute("data-url");return r?n.currentTarget.getAttribute("target")==="_blank"?window.open(r,"_blank"):location.href=r:!1})})();(function(){window.history.scrollRestoration&&document.querySelector(".desktop-basket")?window.history.scrollRestoration="manual":window.history.scrollRestoration="auto"})();(function(){let e=document.querySelector("#mobile-app-notify-badge");e&&e.querySelector(".close-mobile-app-notify-badge").addEventListener("click",function(t){return t.preventDefault(),e.remove(),document.body.classList.remove("mobile-app-badge-active"),U("mobileAppNotifyShownOnDesktop","1",{domain:".petlebi.com",path:"/",maxAge:60*60*24*30}),!1})})();(async function(){let e="cookiesAcceptedOnDesktop";if(G(e))return!1;let n=T(`<div class="cookie-consent-banner">
        <div class="container">
            <div class="banner-content">
                <p>
                    Daha iyi hizmetler sunabilmek için çerezler kullanıyoruz. petlebi.com'u kullanarak çerezlere izin vermiş olursunuz.
                    <a href="/alisveris/s/gizlilik-ve-guvenlik" target="_blank" class="text-white text-decoration-underline">Detaylı Bilgi</a>
                </p>
                <button class="btn btn-primary">Tamam</button>
            </div>
        </div>         
    </div>`)[0];document.body.append(n),await F(500),n.classList.add("show"),n.querySelector("button").addEventListener("click",function(){U(e,"1",{domain:".petlebi.com",path:"/",maxAge:60*60*24*30}),n.classList.remove("show"),F(2e3).then(function(){n.remove()})})})();(function(){let e=document.querySelectorAll(".nav-dynamic-title-source"),t=document.querySelector(".nav-dynamic-title-target");if(e&&t)for(let n=0;n<e.length;n++)e[n].addEventListener("shown.bs.tab",function(r){t.textContent=r.target.textContent})})();console.log("desktop.js on /desktop/main.js");
